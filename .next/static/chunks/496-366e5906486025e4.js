"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[496],{80496:function(e,a,t){t.d(a,{D:function(){return h}});var s=t(57437),n=t(2265),l=t(99376),i=t(21218),r=t(17936);let o=e=>{let{scenario:a,onDelete:t,onDuplicate:o,onRename:c}=e,d=(0,l.useRouter)(),[u,m]=(0,n.useState)(!1),[h,x]=(0,n.useState)(!1),[p,v]=(0,n.useState)(a.name),j=(0,r.B)(new Date(a.updatedAt),new Date,{addSuffix:!0});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Zb,{className:"h-full transition-all hover:shadow-lg",children:(0,s.jsxs)("div",{className:"p-6 flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg line-clamp-1",children:a.name}),"draft"===a.completionStatus&&(0,s.jsx)("div",{className:"badge badge-warning ml-2",children:"Draft"}),"complete"===a.completionStatus&&(0,s.jsx)("div",{className:"badge badge-success ml-2",children:"Complete"}),(0,s.jsxs)("div",{className:"dropdown dropdown-end ml-auto",children:[(0,s.jsx)("label",{tabIndex:0,className:"btn btn-ghost btn-sm btn-square",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-5 h-5 stroke-current",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})})}),(0,s.jsxs)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:()=>x(!0),children:"Rename"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:()=>o(a.id),children:"Duplicate"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:()=>m(!0),className:"text-error",children:"Delete"})})]})]})]}),a.description&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:a.description}),(0,s.jsxs)("div",{className:"flex items-center mt-auto pt-4",children:[(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("div",{className:"badge badge-outline",children:a.originCountry}),(0,s.jsx)("div",{className:"badge badge-outline",children:a.destinationCountry})]}),(0,s.jsxs)("div",{className:"ml-auto text-xs text-gray-500",children:["Updated ",j]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(i.zx,{onClick:()=>{d.push("/scenarios/".concat(a.id))},className:"w-full",children:"View Scenario"})})]})}),(0,s.jsx)(i.u_,{isOpen:u,onClose:()=>m(!1),title:"Delete Scenario",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("p",{children:['Are you sure you want to delete "',a.name,'"? This action cannot be undone.']}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,s.jsx)(i.zx,{variant:"ghost",onClick:()=>m(!1),children:"Cancel"}),(0,s.jsx)(i.zx,{variant:"primary",className:"btn-error",onClick:()=>{t(a.id),m(!1)},children:"Delete"})]})]})}),(0,s.jsx)(i.u_,{isOpen:h,onClose:()=>x(!1),title:"Rename Scenario",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Scenario Name"})}),(0,s.jsx)("input",{type:"text",className:"input input-bordered w-full",value:p,onChange:e=>v(e.target.value),placeholder:"Enter scenario name"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,s.jsx)(i.zx,{variant:"ghost",onClick:()=>x(!1),children:"Cancel"}),(0,s.jsx)(i.zx,{onClick:()=>{""!==p.trim()&&(c(a.id,p),x(!1))},children:"Save"})]})]})})]})};var c=t(97869);let d={US:"United States",GB:"United Kingdom",PT:"Portugal",ES:"Spain",FR:"France",IT:"Italy",DE:"Germany",CA:"Canada",AU:"Australia",NZ:"New Zealand",IE:"Ireland",CH:"Switzerland",GR:"Greece",AT:"Austria",BE:"Belgium",NL:"Netherlands",SE:"Sweden",NO:"Norway",DK:"Denmark",FI:"Finland",JP:"Japan",CN:"China",SG:"Singapore",AE:"United Arab Emirates",BR:"Brazil",MX:"Mexico"};c.Cv.PT,c.Cv.ES,c.Cv.FR,c.Cv.IT,c.Cv.GR,c.Cv.CH,c.Cv.DE,c.Cv.NL,c.Cv.IE,c.Cv.CA,c.Cv.AU,c.Cv.NZ,c.Cv.SG,c.Cv.AE;var u=t(40525);let m=e=>{let{isOpen:a,onClose:t,onSubmit:l,title:r="Create New Scenario"}=e,{household:o}=(0,u.Un)(),c={name:"",description:"",destinationCountry:(null==o?void 0:o.destinationCountry)||"PT"},[m,h]=(0,n.useState)(c),[x,p]=(0,n.useState)({}),[v,j]=(0,n.useState)(!1),C=e=>{let{name:a,value:t}=e.target;h(e=>({...e,[a]:t})),x[a]&&p(e=>{let t={...e};return delete t[a],t})},g=()=>{let e={};return m.name.trim()||(e.name="Scenario name is required"),m.destinationCountry||(e.destinationCountry="Destination country is required"),console.log("CreateScenarioModal: validation errors:",e),p(e),0===Object.keys(e).length},b=async()=>{if(console.log("CreateScenarioModal: handleSubmit called with data:",m),g()){j(!0);try{console.log("CreateScenarioModal: validation passed, submitting form"),await l(m),t()}catch(e){console.error("CreateScenarioModal: onSubmit failed",e)}finally{j(!1)}}else console.log("CreateScenarioModal: validation failed, not submitting")};return(0,n.useEffect)(()=>{h({name:"",description:"",destinationCountry:(null==o?void 0:o.destinationCountry)||"PT"})},[o,a]),(0,s.jsx)(i.u_,{isOpen:a,onClose:t,title:r,children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Scenario Name"})}),(0,s.jsx)(i.II,{name:"name",value:m.name,onChange:C,placeholder:"Enter scenario name",error:x.name})]}),(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Description (Optional)"})}),(0,s.jsx)("textarea",{name:"description",value:m.description,onChange:C,placeholder:"Enter a brief description",className:"textarea textarea-bordered h-24"})]}),(0,s.jsxs)("div",{className:"form-control w-full md:col-span-2",children:[(0,s.jsx)("label",{className:"label",children:(0,s.jsx)("span",{className:"label-text",children:"Destination Country"})}),(0,s.jsx)(i.Ph,{name:"destinationCountry",value:m.destinationCountry,onChange:C,error:x.destinationCountry,options:Object.entries(d).map(e=>{let[a,t]=e;return{value:a,label:t}})})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,s.jsx)(i.zx,{variant:"ghost",onClick:t,children:"Cancel"}),(0,s.jsx)(i.zx,{onClick:b,disabled:v,className:v?"loading":"",children:v?"Creating...":"Create Scenario"})]})]})})},h=e=>{let{scenarios:a,onCreateScenario:t,onDeleteScenario:l,onDuplicateScenario:r,onRenameScenario:c}=e;console.log("ScenarioList: received scenarios prop:",a);let[u,h]=(0,n.useState)(!1),[x,p]=(0,n.useState)(""),[v,j]=(0,n.useState)("updatedAt"),[C,g]=(0,n.useState)("desc"),[b,S]=(0,n.useState)(""),[f,N]=(0,n.useState)("all"),w=(0,n.useMemo)(()=>a.filter(e=>{let a=""===x||e.name.toLowerCase().includes(x.toLowerCase())||e.description&&e.description.toLowerCase().includes(x.toLowerCase()),t=""===b||e.destinationCountry===b,s="all"===f||e.completionStatus===f;return a&&t&&s}).sort((e,a)=>{let t=0;return t="name"===v?e.name.localeCompare(a.name):"createdAt"===v?new Date(e.createdAt).getTime()-new Date(a.createdAt).getTime():new Date(e.updatedAt).getTime()-new Date(a.updatedAt).getTime(),"asc"===C?t:-t}),[a,x,v,C,b,f]),y=(0,n.useMemo)(()=>{let e=new Set;return a.forEach(a=>{e.add(a.destinationCountry)}),Array.from(e).sort()},[a]),A=e=>{e===v?g("asc"===C?"desc":"asc"):(j(e),g("desc"))};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[(0,s.jsxs)("div",{className:"relative w-full sm:w-64",children:[(0,s.jsx)(i.II,{type:"text",placeholder:"Search scenarios...",value:x,onChange:e=>p(e.target.value),className:"pr-10"}),(0,s.jsx)("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",onClick:()=>p(""),style:{display:x?"block":"none"},children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)(i.Ph,{value:b,onChange:e=>S(e.target.value),className:"w-full sm:w-48",options:[{value:"",label:"All Countries"},...y.map(e=>({value:e,label:d[e]||e}))]}),(0,s.jsx)(i.Ph,{value:f,onChange:e=>N(e.target.value),className:"w-full sm:w-48",options:[{value:"all",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"complete",label:"Complete"}]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[(0,s.jsxs)("div",{className:"join w-full sm:w-auto",children:[(0,s.jsxs)("button",{className:"join-item btn ".concat("updatedAt"===v?"btn-active":""),onClick:()=>A("updatedAt"),children:["Last Updated","updatedAt"===v&&(0,s.jsx)("span",{className:"ml-1",children:"desc"===C?"↓":"↑"})]}),(0,s.jsxs)("button",{className:"join-item btn ".concat("createdAt"===v?"btn-active":""),onClick:()=>A("createdAt"),children:["Created","createdAt"===v&&(0,s.jsx)("span",{className:"ml-1",children:"desc"===C?"↓":"↑"})]}),(0,s.jsxs)("button",{className:"join-item btn ".concat("name"===v?"btn-active":""),onClick:()=>A("name"),children:["Name","name"===v&&(0,s.jsx)("span",{className:"ml-1",children:"desc"===C?"↓":"↑"})]})]}),(0,s.jsx)(i.zx,{onClick:()=>h(!0),className:"w-full sm:w-auto",children:"Create New Scenario"})]})]}),w.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(e=>(0,s.jsx)(o,{scenario:e,onDelete:l,onDuplicate:r,onRename:c},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12 bg-base-200 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No scenarios found"}),x||b?(0,s.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filters to find what you're looking for."}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-gray-500",children:"You haven't created any scenarios yet. Get started by creating your first one!"}),(0,s.jsx)(i.zx,{onClick:()=>h(!0),children:"Create Your First Scenario"})]})]}),(0,s.jsx)(m,{isOpen:u,onClose:()=>h(!1),onSubmit:t})]})}},40525:function(e,a,t){t.d(a,{HJ:function(){return r},J7:function(){return c},Th:function(){return l},Un:function(){return n},rz:function(){return o},tF:function(){return d}});var s=t(86760);t(2265);let n=()=>{let e=(0,s.o)(e=>e.profile);return{household:e.household,isComplete:e.isComplete,activeCountry:e.activeCountry,isHydrated:e.isHydrated,setHousehold:e.setHousehold,updateHousehold:e.updateHousehold,updateHouseholdMembers:e.updateHouseholdMembers,clearHousehold:e.clearHousehold,setActiveCountry:e.setActiveCountry,setHydrated:e.setHydrated}},l=()=>(0,s.o)(e=>({scenarios:e.scenarios,activeScenarioId:e.activeScenarioId,activeScenario:e.activeScenario,scenarioList:e.scenarioList,isLoading:e.isLoading,error:e.error,storageStats:e.storageStats,loadScenarios:e.loadScenarios,setActiveScenarioId:e.setActiveScenarioId,createScenario:e.createScenario,updateScenario:e.updateScenario,deleteScenario:e.deleteScenario,duplicateScenario:e.duplicateScenario,exportScenarios:e.exportScenarios,importScenarios:e.importScenarios,createTemplateScenario:e.createTemplateScenario,refreshStorageStats:e.refreshStorageStats,scheduleAutoSave:e.scheduleAutoSave,fromActiveScenario:e.fromActiveScenario})),i=()=>(0,s.o)(e=>({activeView:e.ui.activeView,sidebarOpen:e.ui.sidebarOpen,theme:e.ui.theme,setActiveView:e.ui.setActiveView,toggleSidebar:e.ui.toggleSidebar,setTheme:e.ui.setTheme})),r=()=>{let e=i();return{activeView:e.activeView,sidebarOpen:e.sidebarOpen,setActiveView:e.setActiveView,toggleSidebar:e.toggleSidebar}},o=l,c=i,d=()=>(0,s.o)(e=>e.profile.household)}}]);