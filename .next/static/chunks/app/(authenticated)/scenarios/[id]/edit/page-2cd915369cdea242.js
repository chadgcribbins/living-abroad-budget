(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[460],{37271:function(e,s,a){Promise.resolve().then(a.bind(a,14445))},99376:function(e,s,a){"use strict";var t=a(35475);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}})},14445:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var t=a(57437),n=a(2265),i=a(99376),r=a(28278),l=a(81131),c=a(86760),o=a(21218),d=a(97869);let m=e=>{let{initialData:s,onSave:a,onCancel:i}=e,[r,l]=(0,n.useState)(s),[c,m]=(0,n.useState)({});(0,n.useEffect)(()=>{l(s)},[s]);let x=e=>{let{name:s,value:a}=e.target;l(e=>({...e,[s]:a})),c[s]&&m(e=>{let a={...e};return delete a[s],a})},u=()=>{let e={};return r.residencyStatus||(e.residencyStatus="Residency status is required."),r.taxRegime||(e.taxRegime="Tax regime is required."),m(e),0===Object.keys(e).length};return(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u()&&a(r)},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"form-control",children:[(0,t.jsx)("label",{htmlFor:"residencyStatus",className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"Residency Status (Destination)"})}),(0,t.jsx)(o.Ph,{id:"residencyStatus",name:"residencyStatus",value:r.residencyStatus,onChange:x,options:Object.values(d.DL).map(e=>({value:e,label:e})),error:c.residencyStatus})]}),(0,t.jsxs)("div",{className:"form-control",children:[(0,t.jsx)("label",{htmlFor:"taxRegime",className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"Tax Regime (Destination)"})}),(0,t.jsx)(o.Ph,{id:"taxRegime",name:"taxRegime",value:r.taxRegime,onChange:x,options:Object.values(d.LT).map(e=>({value:e,label:e})),error:c.taxRegime})]})]}),(0,t.jsxs)("div",{className:"p-4 border border-dashed border-gray-300 rounded-md bg-gray-50 mt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2 text-center",children:"Family Members"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 text-center mb-4",children:"(Editing family members - Add, Remove, Edit Birth Dates - Coming soon)"})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 mt-8",children:[i&&(0,t.jsx)(o.zx,{type:"button",variant:"ghost",onClick:i,children:"Cancel"}),(0,t.jsx)(o.zx,{type:"submit",variant:"primary",children:"Save Household Details"})]})]})};var x=()=>{let e=(0,i.useRouter)(),s=(0,i.useParams)(),a=null==s?void 0:s.id,{scenarios:d,activeScenario:x,setActiveScenarioId:u,updateScenario:h,isLoading:j,error:g,loadScenarios:f}=(0,c.o)(e=>({scenarios:e.scenarios,activeScenario:e.activeScenario,setActiveScenarioId:e.setActiveScenarioId,updateScenario:e.updateScenario,isLoading:e.isLoading,error:e.error,loadScenarios:e.loadScenarios})),[b,p]=(0,n.useState)(null);(0,n.useEffect)(()=>{0===Object.keys(d).length&&a&&(console.log("ScenarioEditPage: No scenarios in store or scenarioId available, loading..."),f())},[f,d,a]),(0,n.useEffect)(()=>{a&&(console.log("ScenarioEditPage: Setting active scenario ID to: ".concat(a)),u(a))},[a,u]),(0,n.useEffect)(()=>{x&&x.id===a?(console.log("ScenarioEditPage: Active scenario matches ID:",x),p(x)):a&&d[a]&&(console.log("ScenarioEditPage: Found scenario in map:",d[a]),p(d[a]),x&&x.id===a||u(a))},[x,a,d,u]);let v=async e=>{if(!b){(0,o.Am)({title:"Error",description:"No current scenario loaded to update.",type:"error"});return}console.log("ScenarioEditPage: Saving household data:",e);let s={content:{...b.content,household:e}};try{await h(b.id,s),(0,o.Am)({title:"Success",description:"Household details saved!",type:"success"})}catch(e){console.error("Failed to save household details",e),(0,o.Am)({title:"Error",description:"Failed to save: ".concat(e instanceof Error?e.message:"Unknown error"),type:"error"})}};return j&&!b&&0===Object.keys(d).length?(0,t.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,t.jsx)(r.Z,{}),(0,t.jsx)("main",{className:"flex-grow container mx-auto py-8 px-4 text-center",children:(0,t.jsx)("p",{children:"Loading scenario data..."})}),(0,t.jsx)(l.Z,{})]}):g&&!b?(0,t.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,t.jsx)(r.Z,{}),(0,t.jsx)("main",{className:"flex-grow container mx-auto py-8 px-4",children:(0,t.jsxs)("p",{className:"text-red-500 text-center",children:["Error loading scenarios: ",g]})}),(0,t.jsx)(l.Z,{})]}):b?(0,t.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,t.jsx)(r.Z,{}),(0,t.jsxs)("main",{className:"flex-grow container mx-auto py-12 px-4 md:px-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold",children:["Edit Scenario: ",b.name]}),b.description&&(0,t.jsx)("p",{className:"text-lg text-gray-600 mt-2",children:b.description}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["ID: ",b.id]})]}),(0,t.jsx)("div",{className:"mb-8 p-4 bg-base-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-center font-semibold",children:"Wizard Navigation Placeholder"})}),(0,t.jsxs)(o.Zb,{className:"p-6 md:p-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Step 1: Household Details"}),b.content.household?(0,t.jsx)(m,{initialData:b.content.household,onSave:v}):(0,t.jsx)("p",{children:"Loading household data or household data is missing..."})]}),(0,t.jsxs)("div",{className:"mt-12 flex justify-between",children:[(0,t.jsx)("button",{className:"btn btn-outline",disabled:!0,children:"Previous Step"})," ",(0,t.jsx)("button",{className:"btn btn-primary",children:"Next Step"})]})]}),(0,t.jsx)(l.Z,{})]}):(0,t.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,t.jsx)(r.Z,{}),(0,t.jsxs)("main",{className:"flex-grow container mx-auto py-8 px-4 text-center",children:[(0,t.jsxs)("p",{children:["Scenario not found or still loading. ID: ",a]}),(0,t.jsx)("button",{onClick:()=>e.push("/scenarios"),className:"btn btn-primary mt-4",children:"Back to Scenarios List"})]}),(0,t.jsx)(l.Z,{})]})}},81131:function(e,s,a){"use strict";var t=a(57437),n=a(27648);s.Z=()=>(0,t.jsx)("footer",{className:"bg-base-200 py-6 mt-12 text-sm",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 md:px-8 text-center",children:[(0,t.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Living Abroad Budget. All rights reserved."]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("a",{href:"#",className:"link link-hover mx-2",children:"Privacy Policy"}),(0,t.jsx)("a",{href:"#",className:"link link-hover mx-2",children:"Terms of Service"})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-base-300",children:[(0,t.jsx)("p",{className:"font-semibold mb-1",children:"Dev Links:"}),(0,t.jsx)(n.default,{href:"/dev/demos",className:"link link-hover mx-2",children:"Lab (Demos)"}),(0,t.jsx)(n.default,{href:"/settings",className:"link link-hover mx-2",children:"Settings"}),(0,t.jsx)(n.default,{href:"/about",className:"link link-hover mx-2",children:"About"})]})]})})},28278:function(e,s,a){"use strict";var t=a(57437),n=a(27648);s.Z=()=>(0,t.jsx)("header",{className:"bg-base-200 py-4 shadow-md",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 md:px-8 flex justify-between items-center",children:[(0,t.jsx)(n.default,{href:"/",className:"text-2xl font-bold text-primary",children:"Living Abroad Budget"}),(0,t.jsx)("nav",{})]})})}},function(e){e.O(0,[7648,6373,6760,1218,2971,2117,1744],function(){return e(e.s=37271)}),_N_E=e.O()}]);