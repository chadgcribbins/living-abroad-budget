(()=>{var e={};e.id=688,e.ids=[688],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},27459:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>l}),r(85885),r(24363),r(82964),r(24589),r(24671),r(21869),r(7629),r(11930),r(12523);var s=r(23191),a=r(88716),n=r(37922),o=r.n(n),i=r(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(t,c);let l=["",{children:["(authenticated)",{children:["scenarios",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,85885)),"/workspace/src/app/(authenticated)/scenarios/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,24363)),"/workspace/src/app/(authenticated)/scenarios/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,82964)),"/workspace/src/app/(authenticated)/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,24589)),"/workspace/src/app/(authenticated)/error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,24671)),"/workspace/src/app/(authenticated)/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,21869)),"/workspace/src/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"/workspace/src/app/error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"/workspace/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"/workspace/src/app/not-found.tsx"]}],d=["/workspace/src/app/(authenticated)/scenarios/page.tsx"],u="/(authenticated)/scenarios/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(authenticated)/scenarios/page",pathname:"/scenarios",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},80352:(e,t,r)=>{Promise.resolve().then(r.bind(r,31116))},78759:(e,t,r)=>{Promise.resolve().then(r.bind(r,10341))},31116:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(10326);r(17577);var a=r(43122);function n({children:e}){return s.jsx(a.e,{requireCompleteProfile:!0,children:e})}},10341:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(10326),a=r(17577),n=r(35047),o=r(19431),i=r(92631),c=r(8342),l=r(93774),d=r(88211),u=r(19782),p=r(58914),m=r(38700),y=r(6882),h=r(22665);function g(){let e=(0,n.useRouter)(),{household:t}=(0,i.Un)(),{scenarioList:r,loadScenarios:g,createScenario:x,deleteScenario:E,duplicateScenario:f,updateScenario:P,error:S}=(0,i.rz)();console.log("ScenariosPage (src/app/(authenticated)/scenarios/page.tsx): Store state:",c.o.getState()),console.log("ScenariosPage (src/app/(authenticated)/scenarios/page.tsx): scenarioList:",r);let[w,b]=(0,a.useState)(!0),[v,C]=(0,a.useState)(null),R=async r=>{b(!0);try{console.log("ScenariosPage (src/app/(authenticated)/scenarios/page.tsx): Creating scenario with data from modal:",r);let s=t?.originCountry||d.Cv.GB;console.log("ScenariosPage (src/app/(authenticated)/scenarios/page.tsx): Using origin country from profile (or default GB):",s);let a={name:r.name,description:r.description,content:{schemaVersion:u.O,originCountry:s,destinationCountry:r.destinationCountry,completionStatus:"draft",household:{id:(0,h.Z)(),createdAt:new Date,updatedAt:new Date,name:`Household for ${r.name}`,members:t?.members||[],originCountry:s,destinationCountry:r.destinationCountry,residencyStatus:t?.residencyStatus||d.DL.TEMPORARY_RESIDENT,taxRegime:t?.taxRegime||d.LT.STANDARD,size:t?.members?.length||0,dependents:t?.members?.filter(e=>e.isDependent).length||0},incomeSources:[],housingType:p.Rj.RENT,housingExpense:{id:(0,h.Z)(),createdAt:new Date,updatedAt:new Date,type:p.Rj.RENT,address:{line1:"",city:"",postalCode:"",country:r.destinationCountry},mainCost:{amount:0,currency:d.NE.EUR,frequency:d.oF.MONTHLY},cost:{amount:0,currency:d.NE.EUR,frequency:d.oF.MONTHLY},size:0,bedrooms:0,bathrooms:0,furnished:!1,utilities:[],insurance:[]},educationExpenses:{},healthcareType:m._.PUBLIC,healthcareExpenses:{},transportType:y.F.PUBLIC,transportExpense:{id:(0,h.Z)(),createdAt:new Date,updatedAt:new Date,type:y.F.PUBLIC,mainCost:{amount:0,currency:d.NE.EUR,frequency:d.oF.MONTHLY},costs:[],isCommute:!1},lifestyleExpenses:[],utilityExpenses:{},emergencyFund:{id:(0,h.Z)(),createdAt:new Date,updatedAt:new Date,targetMonths:3,currentBalance:{amount:0,currency:d.NE.EUR},monthlyContribution:{amount:0,currency:d.NE.EUR},minimumBalance:{amount:0,currency:d.NE.EUR},location:"",isLiquid:!0},fxSettings:{baseCurrency:d.NE.EUR,displayCurrency:d.NE.EUR,displayCurrencies:[d.NE.EUR,d.NE.GBP],manualRates:!1,customRates:{},sensitivityRange:[-10,10]}}};console.log("ScenariosPage (src/app/(authenticated)/scenarios/page.tsx): Full ScenarioInput object prepared:",a);let n=await x(a);if(n)(0,l.Am)({title:"Scenario Created",description:`Successfully created scenario: ${a.name}`,type:"success"}),e.push(`/scenario/${n}/edit`);else throw Error("Scenario creation failed or did not return a valid ID.")}catch(t){console.error("ScenariosPage (src/app/(authenticated)/scenarios/page.tsx): Error creating scenario:",t);let e=t instanceof Error?t.message:"Failed to create scenario";C(e),(0,l.Am)({title:"Error",description:e,type:"error"})}finally{b(!1)}},A=async e=>{try{await E(e),(0,l.Am)({title:"Success",description:"Scenario deleted successfully",type:"success"})}catch(e){console.error("Error deleting scenario:",e),C(e instanceof Error?e.message:"Failed to delete scenario"),(0,l.Am)({title:"Error",description:"Failed to delete scenario",type:"error"})}},N=async t=>{try{let r=await f(t);if(r)(0,l.Am)({title:"Success",description:"Scenario duplicated successfully",type:"success"}),e.push(`/scenario/${r}/edit`);else throw Error("Scenario duplication failed or did not return a valid ID.")}catch(e){console.error("Error duplicating scenario:",e),C(e instanceof Error?e.message:"Failed to duplicate scenario"),(0,l.Am)({title:"Error",description:"Failed to duplicate scenario",type:"error"})}},j=async(e,t)=>{try{await P(e,{name:t}),(0,l.Am)({title:"Success",description:"Scenario renamed successfully",type:"success"}),g()}catch(e){console.error("Error renaming scenario:",e),C(e instanceof Error?e.message:"Failed to rename scenario"),(0,l.Am)({title:"Error",description:"Failed to rename scenario",type:"error"})}};return w?s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx("p",{children:"Loading scenarios..."})}):v||S?(0,s.jsxs)("div",{className:"flex justify-center items-center h-screen text-red-500",children:[(0,s.jsxs)("p",{children:["Error: ",v||S]}),s.jsx("button",{onClick:()=>g(),className:"ml-4 p-2 bg-blue-500 text-white rounded",children:"Retry"})]}):s.jsx("div",{className:"container mx-auto p-4",children:s.jsx(o.D,{scenarios:r,onCreateScenario:R,onDeleteScenario:A,onDuplicateScenario:N,onRenameScenario:j})})}},24363:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/workspace/src/app/(authenticated)/scenarios/layout.tsx#default`)},85885:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/workspace/src/app/(authenticated)/scenarios/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,290,706,203,481],()=>r(27459));module.exports=s})();